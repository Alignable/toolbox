version: v1.0
name: Toolbox S2 project
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: Run Tests
    task:
      prologue:
        commands:
          - checkout
          - cd ../
          - rm -rf .toolbox/
          - mv toolbox/ .toolbox
          - bash .toolbox/install-toolbox
          - source .toolbox/toolbox
          - cd .toolbox
      jobs:
      - name: Erlang change test
        commands:
          - echo "Erlang version"
          - erl -eval 'erlang:display(erlang:system_info(otp_release)), halt().'  -noshell
          - sem-version erlang 20
          - erl -eval 'erlang:display(erlang:system_info(otp_release)), halt().'  -noshell
          - sem-version erlang 21
          - erl -eval 'erlang:display(erlang:system_info(otp_release)), halt().'  -noshell
          - sem-version erlang 22
      - name: scala change test
        commands:
          - echo "actual scala version"
          - scala -version
          - sem-version scala 2.11
          - sem-version scala 2.12
          - sem-version scala 2.30
